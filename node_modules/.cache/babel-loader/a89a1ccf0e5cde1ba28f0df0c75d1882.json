{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _uncontrollable = require(\"uncontrollable\");\n\nvar _useTimeout = _interopRequireDefault(require(\"@restart/hooks/useTimeout\"));\n\nvar _AddToListOption = _interopRequireWildcard(require(\"./AddToListOption\"));\n\nvar _DropdownListInput = _interopRequireDefault(require(\"./DropdownListInput\"));\n\nvar _Icon = require(\"./Icon\");\n\nvar _List = _interopRequireDefault(require(\"./List\"));\n\nvar _FocusListContext = require(\"./FocusListContext\");\n\nvar _Popup = _interopRequireDefault(require(\"./Popup\"));\n\nvar _Widget = _interopRequireDefault(require(\"./Widget\"));\n\nvar _WidgetPicker = _interopRequireDefault(require(\"./WidgetPicker\"));\n\nvar _A11y = require(\"./A11y\");\n\nvar _Filter = require(\"./Filter\");\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./PropTypes\"));\n\nvar _canShowCreate = _interopRequireDefault(require(\"./canShowCreate\"));\n\nvar _Accessors = require(\"./Accessors\");\n\nvar _useAutoFocus = _interopRequireDefault(require(\"./useAutoFocus\"));\n\nvar _useDropdownToggle = _interopRequireDefault(require(\"./useDropdownToggle\"));\n\nvar _useFocusManager = _interopRequireDefault(require(\"./useFocusManager\"));\n\nvar _Localization = require(\"./Localization\");\n\nvar _WidgetHelpers = require(\"./WidgetHelpers\");\n\nvar _PickerCaret = _interopRequireDefault(require(\"./PickerCaret\"));\n\nconst _excluded = [\"id\", \"autoFocus\", \"textField\", \"dataKey\", \"value\", \"defaultValue\", \"onChange\", \"open\", \"defaultOpen\", \"onToggle\", \"searchTerm\", \"defaultSearchTerm\", \"onSearch\", \"filter\", \"allowCreate\", \"delay\", \"focusFirstItem\", \"className\", \"containerClassName\", \"placeholder\", \"busy\", \"disabled\", \"readOnly\", \"selectIcon\", \"busySpinner\", \"dropUp\", \"tabIndex\", \"popupTransition\", \"name\", \"autoComplete\", \"onSelect\", \"onCreate\", \"onKeyPress\", \"onKeyDown\", \"onClick\", \"inputProps\", \"listProps\", \"popupProps\", \"renderListItem\", \"renderListGroup\", \"optionComponent\", \"renderValue\", \"groupBy\", \"onBlur\", \"onFocus\", \"listComponent\", \"popupComponent\", \"data\", \"messages\"];\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst propTypes = {\n  value: _propTypes.default.any,\n\n  /**\n   * @type {function (\n   *  dataItems: ?any,\n   *  metadata: {\n   *    lastValue: ?any,\n   *    searchTerm: ?string\n   *    originalEvent: SyntheticEvent,\n   *  }\n   * ): void}\n   */\n  onChange: _propTypes.default.func,\n  open: _propTypes.default.bool,\n  onToggle: _propTypes.default.func,\n  data: _propTypes.default.array,\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  allowCreate: _propTypes.default.oneOf([true, false, 'onFilter']),\n\n  /**\n   * A React render prop for customizing the rendering of the DropdownList\n   * value\n   */\n  renderValue: _propTypes.default.func,\n  renderListItem: _propTypes.default.func,\n  listComponent: CustomPropTypes.elementType,\n  optionComponent: CustomPropTypes.elementType,\n  renderPopup: _propTypes.default.func,\n  renderListGroup: _propTypes.default.func,\n  groupBy: CustomPropTypes.accessor,\n\n  /**\n   *\n   * @type {(dataItem: ?any, metadata: { originalEvent: SyntheticEvent }) => void}\n   */\n  onSelect: _propTypes.default.func,\n  onCreate: _propTypes.default.func,\n\n  /**\n   * @type function(searchTerm: string, metadata: { action, lastSearchTerm, originalEvent? })\n   */\n  onSearch: _propTypes.default.func,\n  searchTerm: _propTypes.default.string,\n  busy: _propTypes.default.bool,\n\n  /** Specify the element used to render the select (down arrow) icon. */\n  selectIcon: _propTypes.default.node,\n\n  /** Specify the element used to render the busy indicator */\n  busySpinner: _propTypes.default.node,\n  placeholder: _propTypes.default.string,\n  dropUp: _propTypes.default.bool,\n  popupTransition: CustomPropTypes.elementType,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  readOnly: CustomPropTypes.disabled,\n\n  /** Adds a css class to the input container element. */\n  containerClassName: _propTypes.default.string,\n  inputProps: _propTypes.default.object,\n  listProps: _propTypes.default.object,\n  messages: _propTypes.default.shape({\n    open: _propTypes.default.string,\n    emptyList: CustomPropTypes.message,\n    emptyFilter: CustomPropTypes.message,\n    createOption: CustomPropTypes.message\n  })\n};\n\nfunction useSearchWordBuilder(delay) {\n  const timeout = (0, _useTimeout.default)();\n  const wordRef = (0, _react.useRef)('');\n\n  function search(character, cb) {\n    let word = (wordRef.current + character).toLowerCase();\n    if (!character) return;\n    wordRef.current = word;\n    timeout.set(() => {\n      wordRef.current = '';\n      cb(word);\n    }, delay);\n  }\n\n  return search;\n}\n/**\n * A `<select>` replacement for single value lists.\n * @public\n */\n\n\nconst DropdownListImpl = /*#__PURE__*/_react.default.forwardRef(function DropdownList(_ref, outerRef) {\n  let {\n    id,\n    autoFocus,\n    textField,\n    dataKey,\n    value,\n    defaultValue,\n    onChange,\n    open,\n    defaultOpen = false,\n    onToggle,\n    searchTerm,\n    defaultSearchTerm = '',\n    onSearch,\n    filter = true,\n    allowCreate = false,\n    delay = 500,\n    focusFirstItem,\n    className,\n    containerClassName,\n    placeholder,\n    busy,\n    disabled,\n    readOnly,\n    selectIcon = _Icon.caretDown,\n    busySpinner,\n    dropUp,\n    tabIndex,\n    popupTransition,\n    name,\n    autoComplete,\n    onSelect,\n    onCreate,\n    onKeyPress,\n    onKeyDown,\n    onClick,\n    inputProps,\n    listProps,\n    popupProps,\n    renderListItem,\n    renderListGroup,\n    optionComponent,\n    renderValue,\n    groupBy,\n    onBlur,\n    onFocus,\n    listComponent: ListComponent = _List.default,\n    popupComponent: Popup = _Popup.default,\n    data: rawData = [],\n    messages: userMessages\n  } = _ref,\n      elementProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  const [currentValue, handleChange] = (0, _uncontrollable.useUncontrolledProp)(value, defaultValue, onChange);\n  const [currentOpen, handleOpen] = (0, _uncontrollable.useUncontrolledProp)(open, defaultOpen, onToggle);\n  const [currentSearch, handleSearch] = (0, _uncontrollable.useUncontrolledProp)(searchTerm, defaultSearchTerm, onSearch);\n  const ref = (0, _react.useRef)(null);\n  const filterRef = (0, _react.useRef)(null);\n  const listRef = (0, _react.useRef)(null);\n  const inputId = (0, _WidgetHelpers.useInstanceId)(id, '_input');\n  const listId = (0, _WidgetHelpers.useInstanceId)(id, '_listbox');\n  const activeId = (0, _WidgetHelpers.useInstanceId)(id, '_listbox_active_option');\n  const accessors = (0, _Accessors.useAccessors)(textField, dataKey);\n  const localizer = (0, _Localization.useLocalizer)(userMessages);\n  (0, _useAutoFocus.default)(!!autoFocus, ref);\n  const toggle = (0, _useDropdownToggle.default)(currentOpen, handleOpen);\n  const isDisabled = disabled === true; // const disabledItems = toItemArray(disabled)\n\n  const isReadOnly = !!readOnly;\n  const [focusEvents, focused] = (0, _useFocusManager.default)(ref, {\n    disabled: isDisabled,\n    onBlur,\n    onFocus\n  }, {\n    didHandle(focused) {\n      if (focused) {\n        if (filter) focus();\n        return;\n      }\n\n      toggle.close();\n      clearSearch();\n    }\n\n  });\n  const data = (0, _Filter.useFilteredData)(rawData, currentOpen ? filter : false, currentSearch, accessors.text);\n  const selectedItem = (0, _react.useMemo)(() => data[accessors.indexOf(data, currentValue)], [data, currentValue, accessors]);\n  const list = (0, _FocusListContext.useFocusList)({\n    activeId,\n    scope: ref,\n    focusFirstItem,\n    anchorItem: currentOpen ? selectedItem : undefined\n  });\n  const [autofilling, setAutofilling] = (0, _react.useState)(false);\n  const nextSearchChar = useSearchWordBuilder(delay);\n  const focusedItem = list.getFocused();\n  (0, _A11y.useActiveDescendant)(ref, activeId, focusedItem && currentOpen, [focusedItem]);\n  const showCreateOption = (0, _canShowCreate.default)(allowCreate, {\n    searchTerm: currentSearch,\n    data,\n    accessors\n  });\n\n  const handleCreate = event => {\n    (0, _WidgetHelpers.notify)(onCreate, [currentSearch]);\n    clearSearch(event);\n    toggle.close();\n    focus();\n  };\n\n  const handleSelect = (dataItem, originalEvent) => {\n    if (readOnly || isDisabled) return;\n    if (dataItem === undefined) return;\n    originalEvent == null ? void 0 : originalEvent.preventDefault();\n\n    if (dataItem === _AddToListOption.CREATE_OPTION) {\n      handleCreate(originalEvent);\n      return;\n    }\n\n    (0, _WidgetHelpers.notify)(onSelect, [dataItem, {\n      originalEvent\n    }]);\n    change(dataItem, originalEvent, true);\n    toggle.close();\n    focus();\n  };\n\n  const handleClick = e => {\n    if (readOnly || isDisabled) return; // prevents double clicks when in a <label>\n\n    e.preventDefault();\n    focus();\n    toggle();\n    (0, _WidgetHelpers.notify)(onClick, [e]);\n  };\n\n  const handleKeyDown = e => {\n    if (readOnly || isDisabled) return;\n    let {\n      key,\n      altKey,\n      ctrlKey,\n      shiftKey\n    } = e;\n    (0, _WidgetHelpers.notify)(onKeyDown, [e]);\n\n    let closeWithFocus = () => {\n      clearSearch();\n      toggle.close();\n      if (currentOpen) setTimeout(focus);\n    };\n\n    if (e.defaultPrevented) return;\n\n    if (key === 'End' && currentOpen && !shiftKey) {\n      e.preventDefault();\n      list.focus(list.last());\n    } else if (key === 'Home' && currentOpen && !shiftKey) {\n      e.preventDefault();\n      list.focus(list.first());\n    } else if (key === 'Escape' && (currentOpen || currentSearch)) {\n      e.preventDefault();\n      closeWithFocus();\n    } else if (key === 'Enter' && currentOpen && ctrlKey && showCreateOption) {\n      e.preventDefault();\n      handleCreate(e);\n    } else if ((key === 'Enter' || key === ' ' && !filter) && currentOpen) {\n      e.preventDefault();\n      if (list.hasFocused()) handleSelect(list.getFocused(), e);\n    } else if (key === 'ArrowDown') {\n      e.preventDefault();\n\n      if (!currentOpen) {\n        toggle.open();\n        return;\n      }\n\n      list.focus(list.next());\n    } else if (key === 'ArrowUp') {\n      e.preventDefault();\n      if (altKey) return closeWithFocus();\n      list.focus(list.prev());\n    }\n  };\n\n  const handleKeyPress = e => {\n    if (readOnly || isDisabled) return;\n    (0, _WidgetHelpers.notify)(onKeyPress, [e]);\n    if (e.defaultPrevented || filter) return;\n    nextSearchChar(String.fromCharCode(e.which), word => {\n      if (!currentOpen) return;\n\n      let isValid = item => _Filter.presets.startsWith(accessors.text(item).toLowerCase(), word.toLowerCase());\n\n      const [items, focusedItem] = list.get();\n      const len = items.length;\n      const startIdx = items.indexOf(focusedItem) + 1;\n      const offset = startIdx >= len ? 0 : startIdx;\n      let idx = 0;\n      let pointer = offset;\n\n      while (idx < len) {\n        pointer = (idx + offset) % len;\n        let item = items[pointer];\n        if (isValid(list.toDataItem(item))) break;\n        idx++;\n      }\n\n      if (idx === len) return;\n      list.focus(items[pointer]);\n    });\n  };\n\n  const handleInputChange = e => {\n    // hitting space to open\n    if (!currentOpen && !e.target.value.trim()) {\n      e.preventDefault();\n    } else {\n      search(e.target.value, e, 'input');\n    }\n\n    toggle.open();\n  };\n\n  const handleAutofillChange = e => {\n    let filledValue = e.target.value.toLowerCase();\n    if (filledValue === '') return void change(null);\n\n    for (const item of rawData) {\n      if (String(accessors.value(item)).toLowerCase() === filledValue || accessors.text(item).toLowerCase() === filledValue) {\n        change(item, e);\n        break;\n      }\n    }\n  };\n\n  function change(nextValue, originalEvent) {\n    let selected = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    if (!accessors.matches(nextValue, currentValue)) {\n      (0, _WidgetHelpers.notify)(handleChange, [nextValue, {\n        originalEvent,\n        source: selected ? 'listbox' : 'input',\n        lastValue: currentValue,\n        searchTerm: currentSearch\n      }]);\n      clearSearch(originalEvent);\n      toggle.close();\n    }\n  }\n\n  function focus() {\n    if (filter) filterRef.current.focus();else ref.current.focus();\n  }\n\n  function clearSearch(originalEvent) {\n    search('', originalEvent, 'clear');\n  }\n\n  function search(nextSearchTerm, originalEvent) {\n    let action = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'input';\n    if (currentSearch !== nextSearchTerm) handleSearch(nextSearchTerm, {\n      action,\n      originalEvent,\n      lastSearchTerm: currentSearch\n    });\n  }\n  /**\n   * Render\n   */\n\n\n  (0, _react.useImperativeHandle)(outerRef, () => ({\n    focus\n  }));\n  let valueItem = accessors.findOrSelf(data, currentValue);\n  let shouldRenderPopup = (0, _WidgetHelpers.useFirstFocusedRender)(focused, currentOpen);\n  const widgetProps = Object.assign({}, elementProps, {\n    role: 'combobox',\n    id: inputId,\n    //tab index when there is no filter input to take focus\n    tabIndex: filter ? -1 : tabIndex || 0,\n    // FIXME: only when item exists\n    'aria-owns': elementProps['aria-owns'] ? `${listId} ${elementProps['aria-owns']}` : listId,\n    'aria-controls': elementProps['aria-controls'] ? `${listId} ${elementProps['aria-controls']}` : listId,\n    'aria-expanded': !!currentOpen,\n    'aria-haspopup': 'listbox',\n    'aria-busy': !!busy,\n    'aria-live': currentOpen ? 'polite' : undefined,\n    'aria-autocomplete': 'list',\n    'aria-disabled': isDisabled,\n    'aria-readonly': isReadOnly\n  });\n  return /*#__PURE__*/_react.default.createElement(_FocusListContext.FocusListContext.Provider, {\n    value: list.context\n  }, /*#__PURE__*/_react.default.createElement(_Widget.default, _extends({}, widgetProps, {\n    open: !!currentOpen,\n    dropUp: !!dropUp,\n    focused: !!focused,\n    disabled: isDisabled,\n    readOnly: isReadOnly,\n    autofilling: autofilling\n  }, focusEvents, {\n    onKeyDown: handleKeyDown,\n    onKeyPress: handleKeyPress,\n    className: (0, _classnames.default)(className, 'rw-dropdown-list'),\n    ref: ref\n  }), /*#__PURE__*/_react.default.createElement(_WidgetPicker.default, {\n    onClick: handleClick,\n    tabIndex: filter ? -1 : 0,\n    className: (0, _classnames.default)(containerClassName, 'rw-widget-input')\n  }, /*#__PURE__*/_react.default.createElement(_DropdownListInput.default, _extends({}, inputProps, {\n    value: valueItem,\n    dataKeyAccessor: accessors.value,\n    textAccessor: accessors.text,\n    name: name,\n    readOnly: readOnly,\n    disabled: isDisabled,\n    allowSearch: !!filter,\n    searchTerm: currentSearch,\n    ref: filterRef,\n    autoComplete: autoComplete,\n    onSearch: handleInputChange,\n    onAutofill: setAutofilling,\n    onAutofillChange: handleAutofillChange,\n    placeholder: placeholder,\n    renderValue: renderValue\n  })), /*#__PURE__*/_react.default.createElement(_PickerCaret.default, {\n    visible: true,\n    busy: busy,\n    icon: selectIcon,\n    spinner: busySpinner\n  })), shouldRenderPopup && /*#__PURE__*/_react.default.createElement(Popup, _extends({}, popupProps, {\n    dropUp: dropUp,\n    open: currentOpen,\n    transition: popupTransition,\n    onEntered: focus,\n    onEntering: () => listRef.current.scrollIntoView()\n  }), /*#__PURE__*/_react.default.createElement(ListComponent, _extends({}, listProps, {\n    id: listId,\n    data: data,\n    tabIndex: -1,\n    disabled: disabled,\n    groupBy: groupBy,\n    searchTerm: currentSearch,\n    accessors: accessors,\n    renderItem: renderListItem,\n    renderGroup: renderListGroup,\n    optionComponent: optionComponent,\n    value: selectedItem,\n    onChange: (d, meta) => handleSelect(d, meta.originalEvent),\n    \"aria-live\": currentOpen ? 'polite' : undefined,\n    \"aria-labelledby\": inputId,\n    \"aria-hidden\": !currentOpen,\n    ref: listRef,\n    messages: {\n      emptyList: rawData.length ? localizer.messages.emptyFilter : localizer.messages.emptyList\n    }\n  })), showCreateOption && /*#__PURE__*/_react.default.createElement(_AddToListOption.default, {\n    onSelect: handleCreate\n  }, localizer.messages.createOption(currentValue, currentSearch || '')))));\n});\n\nDropdownListImpl.displayName = 'DropdownList';\nDropdownListImpl.propTypes = propTypes;\nvar _default = DropdownListImpl;\nexports.default = _default;","map":{"version":3,"names":["exports","__esModule","default","_classnames","_interopRequireDefault","require","_propTypes","_react","_interopRequireWildcard","_uncontrollable","_useTimeout","_AddToListOption","_DropdownListInput","_Icon","_List","_FocusListContext","_Popup","_Widget","_WidgetPicker","_A11y","_Filter","CustomPropTypes","_canShowCreate","_Accessors","_useAutoFocus","_useDropdownToggle","_useFocusManager","_Localization","_WidgetHelpers","_PickerCaret","_excluded","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_extends","assign","target","i","arguments","length","source","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","propTypes","value","any","onChange","func","open","bool","onToggle","data","array","dataKey","accessor","textField","allowCreate","oneOf","renderValue","renderListItem","listComponent","elementType","optionComponent","renderPopup","renderListGroup","groupBy","onSelect","onCreate","onSearch","searchTerm","string","busy","selectIcon","node","busySpinner","placeholder","dropUp","popupTransition","disabled","acceptsArray","readOnly","containerClassName","inputProps","object","listProps","messages","shape","emptyList","message","emptyFilter","createOption","useSearchWordBuilder","delay","timeout","wordRef","useRef","search","character","cb","word","current","toLowerCase","DropdownListImpl","forwardRef","DropdownList","_ref","outerRef","id","autoFocus","defaultValue","defaultOpen","defaultSearchTerm","filter","focusFirstItem","className","caretDown","tabIndex","name","autoComplete","onKeyPress","onKeyDown","onClick","popupProps","onBlur","onFocus","ListComponent","popupComponent","Popup","rawData","userMessages","elementProps","currentValue","handleChange","useUncontrolledProp","currentOpen","handleOpen","currentSearch","handleSearch","ref","filterRef","listRef","inputId","useInstanceId","listId","activeId","accessors","useAccessors","localizer","useLocalizer","toggle","isDisabled","isReadOnly","focusEvents","focused","didHandle","focus","close","clearSearch","useFilteredData","text","selectedItem","useMemo","list","useFocusList","scope","anchorItem","undefined","autofilling","setAutofilling","useState","nextSearchChar","focusedItem","getFocused","useActiveDescendant","showCreateOption","handleCreate","event","notify","handleSelect","dataItem","originalEvent","preventDefault","CREATE_OPTION","change","handleClick","e","handleKeyDown","altKey","ctrlKey","shiftKey","closeWithFocus","setTimeout","defaultPrevented","last","first","hasFocused","next","prev","handleKeyPress","String","fromCharCode","which","isValid","item","presets","startsWith","items","len","startIdx","offset","idx","pointer","toDataItem","handleInputChange","trim","handleAutofillChange","filledValue","nextValue","selected","matches","lastValue","nextSearchTerm","action","lastSearchTerm","useImperativeHandle","valueItem","findOrSelf","shouldRenderPopup","useFirstFocusedRender","widgetProps","role","createElement","FocusListContext","Provider","context","dataKeyAccessor","textAccessor","allowSearch","onAutofill","onAutofillChange","visible","icon","spinner","transition","onEntered","onEntering","scrollIntoView","renderItem","renderGroup","d","meta","displayName","_default"],"sources":["/home/kokegg/proyectoKaren/node_modules/react-widgets/cjs/DropdownList.js"],"sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _uncontrollable = require(\"uncontrollable\");\n\nvar _useTimeout = _interopRequireDefault(require(\"@restart/hooks/useTimeout\"));\n\nvar _AddToListOption = _interopRequireWildcard(require(\"./AddToListOption\"));\n\nvar _DropdownListInput = _interopRequireDefault(require(\"./DropdownListInput\"));\n\nvar _Icon = require(\"./Icon\");\n\nvar _List = _interopRequireDefault(require(\"./List\"));\n\nvar _FocusListContext = require(\"./FocusListContext\");\n\nvar _Popup = _interopRequireDefault(require(\"./Popup\"));\n\nvar _Widget = _interopRequireDefault(require(\"./Widget\"));\n\nvar _WidgetPicker = _interopRequireDefault(require(\"./WidgetPicker\"));\n\nvar _A11y = require(\"./A11y\");\n\nvar _Filter = require(\"./Filter\");\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./PropTypes\"));\n\nvar _canShowCreate = _interopRequireDefault(require(\"./canShowCreate\"));\n\nvar _Accessors = require(\"./Accessors\");\n\nvar _useAutoFocus = _interopRequireDefault(require(\"./useAutoFocus\"));\n\nvar _useDropdownToggle = _interopRequireDefault(require(\"./useDropdownToggle\"));\n\nvar _useFocusManager = _interopRequireDefault(require(\"./useFocusManager\"));\n\nvar _Localization = require(\"./Localization\");\n\nvar _WidgetHelpers = require(\"./WidgetHelpers\");\n\nvar _PickerCaret = _interopRequireDefault(require(\"./PickerCaret\"));\n\nconst _excluded = [\"id\", \"autoFocus\", \"textField\", \"dataKey\", \"value\", \"defaultValue\", \"onChange\", \"open\", \"defaultOpen\", \"onToggle\", \"searchTerm\", \"defaultSearchTerm\", \"onSearch\", \"filter\", \"allowCreate\", \"delay\", \"focusFirstItem\", \"className\", \"containerClassName\", \"placeholder\", \"busy\", \"disabled\", \"readOnly\", \"selectIcon\", \"busySpinner\", \"dropUp\", \"tabIndex\", \"popupTransition\", \"name\", \"autoComplete\", \"onSelect\", \"onCreate\", \"onKeyPress\", \"onKeyDown\", \"onClick\", \"inputProps\", \"listProps\", \"popupProps\", \"renderListItem\", \"renderListGroup\", \"optionComponent\", \"renderValue\", \"groupBy\", \"onBlur\", \"onFocus\", \"listComponent\", \"popupComponent\", \"data\", \"messages\"];\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nconst propTypes = {\n  value: _propTypes.default.any,\n\n  /**\n   * @type {function (\n   *  dataItems: ?any,\n   *  metadata: {\n   *    lastValue: ?any,\n   *    searchTerm: ?string\n   *    originalEvent: SyntheticEvent,\n   *  }\n   * ): void}\n   */\n  onChange: _propTypes.default.func,\n  open: _propTypes.default.bool,\n  onToggle: _propTypes.default.func,\n  data: _propTypes.default.array,\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  allowCreate: _propTypes.default.oneOf([true, false, 'onFilter']),\n\n  /**\n   * A React render prop for customizing the rendering of the DropdownList\n   * value\n   */\n  renderValue: _propTypes.default.func,\n  renderListItem: _propTypes.default.func,\n  listComponent: CustomPropTypes.elementType,\n  optionComponent: CustomPropTypes.elementType,\n  renderPopup: _propTypes.default.func,\n  renderListGroup: _propTypes.default.func,\n  groupBy: CustomPropTypes.accessor,\n\n  /**\n   *\n   * @type {(dataItem: ?any, metadata: { originalEvent: SyntheticEvent }) => void}\n   */\n  onSelect: _propTypes.default.func,\n  onCreate: _propTypes.default.func,\n\n  /**\n   * @type function(searchTerm: string, metadata: { action, lastSearchTerm, originalEvent? })\n   */\n  onSearch: _propTypes.default.func,\n  searchTerm: _propTypes.default.string,\n  busy: _propTypes.default.bool,\n\n  /** Specify the element used to render the select (down arrow) icon. */\n  selectIcon: _propTypes.default.node,\n\n  /** Specify the element used to render the busy indicator */\n  busySpinner: _propTypes.default.node,\n  placeholder: _propTypes.default.string,\n  dropUp: _propTypes.default.bool,\n  popupTransition: CustomPropTypes.elementType,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  readOnly: CustomPropTypes.disabled,\n\n  /** Adds a css class to the input container element. */\n  containerClassName: _propTypes.default.string,\n  inputProps: _propTypes.default.object,\n  listProps: _propTypes.default.object,\n  messages: _propTypes.default.shape({\n    open: _propTypes.default.string,\n    emptyList: CustomPropTypes.message,\n    emptyFilter: CustomPropTypes.message,\n    createOption: CustomPropTypes.message\n  })\n};\n\nfunction useSearchWordBuilder(delay) {\n  const timeout = (0, _useTimeout.default)();\n  const wordRef = (0, _react.useRef)('');\n\n  function search(character, cb) {\n    let word = (wordRef.current + character).toLowerCase();\n    if (!character) return;\n    wordRef.current = word;\n    timeout.set(() => {\n      wordRef.current = '';\n      cb(word);\n    }, delay);\n  }\n\n  return search;\n}\n\n/**\n * A `<select>` replacement for single value lists.\n * @public\n */\nconst DropdownListImpl = /*#__PURE__*/_react.default.forwardRef(function DropdownList(_ref, outerRef) {\n  let {\n    id,\n    autoFocus,\n    textField,\n    dataKey,\n    value,\n    defaultValue,\n    onChange,\n    open,\n    defaultOpen = false,\n    onToggle,\n    searchTerm,\n    defaultSearchTerm = '',\n    onSearch,\n    filter = true,\n    allowCreate = false,\n    delay = 500,\n    focusFirstItem,\n    className,\n    containerClassName,\n    placeholder,\n    busy,\n    disabled,\n    readOnly,\n    selectIcon = _Icon.caretDown,\n    busySpinner,\n    dropUp,\n    tabIndex,\n    popupTransition,\n    name,\n    autoComplete,\n    onSelect,\n    onCreate,\n    onKeyPress,\n    onKeyDown,\n    onClick,\n    inputProps,\n    listProps,\n    popupProps,\n    renderListItem,\n    renderListGroup,\n    optionComponent,\n    renderValue,\n    groupBy,\n    onBlur,\n    onFocus,\n    listComponent: ListComponent = _List.default,\n    popupComponent: Popup = _Popup.default,\n    data: rawData = [],\n    messages: userMessages\n  } = _ref,\n      elementProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  const [currentValue, handleChange] = (0, _uncontrollable.useUncontrolledProp)(value, defaultValue, onChange);\n  const [currentOpen, handleOpen] = (0, _uncontrollable.useUncontrolledProp)(open, defaultOpen, onToggle);\n  const [currentSearch, handleSearch] = (0, _uncontrollable.useUncontrolledProp)(searchTerm, defaultSearchTerm, onSearch);\n  const ref = (0, _react.useRef)(null);\n  const filterRef = (0, _react.useRef)(null);\n  const listRef = (0, _react.useRef)(null);\n  const inputId = (0, _WidgetHelpers.useInstanceId)(id, '_input');\n  const listId = (0, _WidgetHelpers.useInstanceId)(id, '_listbox');\n  const activeId = (0, _WidgetHelpers.useInstanceId)(id, '_listbox_active_option');\n  const accessors = (0, _Accessors.useAccessors)(textField, dataKey);\n  const localizer = (0, _Localization.useLocalizer)(userMessages);\n  (0, _useAutoFocus.default)(!!autoFocus, ref);\n  const toggle = (0, _useDropdownToggle.default)(currentOpen, handleOpen);\n  const isDisabled = disabled === true; // const disabledItems = toItemArray(disabled)\n\n  const isReadOnly = !!readOnly;\n  const [focusEvents, focused] = (0, _useFocusManager.default)(ref, {\n    disabled: isDisabled,\n    onBlur,\n    onFocus\n  }, {\n    didHandle(focused) {\n      if (focused) {\n        if (filter) focus();\n        return;\n      }\n\n      toggle.close();\n      clearSearch();\n    }\n\n  });\n  const data = (0, _Filter.useFilteredData)(rawData, currentOpen ? filter : false, currentSearch, accessors.text);\n  const selectedItem = (0, _react.useMemo)(() => data[accessors.indexOf(data, currentValue)], [data, currentValue, accessors]);\n  const list = (0, _FocusListContext.useFocusList)({\n    activeId,\n    scope: ref,\n    focusFirstItem,\n    anchorItem: currentOpen ? selectedItem : undefined\n  });\n  const [autofilling, setAutofilling] = (0, _react.useState)(false);\n  const nextSearchChar = useSearchWordBuilder(delay);\n  const focusedItem = list.getFocused();\n  (0, _A11y.useActiveDescendant)(ref, activeId, focusedItem && currentOpen, [focusedItem]);\n  const showCreateOption = (0, _canShowCreate.default)(allowCreate, {\n    searchTerm: currentSearch,\n    data,\n    accessors\n  });\n\n  const handleCreate = event => {\n    (0, _WidgetHelpers.notify)(onCreate, [currentSearch]);\n    clearSearch(event);\n    toggle.close();\n    focus();\n  };\n\n  const handleSelect = (dataItem, originalEvent) => {\n    if (readOnly || isDisabled) return;\n    if (dataItem === undefined) return;\n    originalEvent == null ? void 0 : originalEvent.preventDefault();\n\n    if (dataItem === _AddToListOption.CREATE_OPTION) {\n      handleCreate(originalEvent);\n      return;\n    }\n\n    (0, _WidgetHelpers.notify)(onSelect, [dataItem, {\n      originalEvent\n    }]);\n    change(dataItem, originalEvent, true);\n    toggle.close();\n    focus();\n  };\n\n  const handleClick = e => {\n    if (readOnly || isDisabled) return; // prevents double clicks when in a <label>\n\n    e.preventDefault();\n    focus();\n    toggle();\n    (0, _WidgetHelpers.notify)(onClick, [e]);\n  };\n\n  const handleKeyDown = e => {\n    if (readOnly || isDisabled) return;\n    let {\n      key,\n      altKey,\n      ctrlKey,\n      shiftKey\n    } = e;\n    (0, _WidgetHelpers.notify)(onKeyDown, [e]);\n\n    let closeWithFocus = () => {\n      clearSearch();\n      toggle.close();\n      if (currentOpen) setTimeout(focus);\n    };\n\n    if (e.defaultPrevented) return;\n\n    if (key === 'End' && currentOpen && !shiftKey) {\n      e.preventDefault();\n      list.focus(list.last());\n    } else if (key === 'Home' && currentOpen && !shiftKey) {\n      e.preventDefault();\n      list.focus(list.first());\n    } else if (key === 'Escape' && (currentOpen || currentSearch)) {\n      e.preventDefault();\n      closeWithFocus();\n    } else if (key === 'Enter' && currentOpen && ctrlKey && showCreateOption) {\n      e.preventDefault();\n      handleCreate(e);\n    } else if ((key === 'Enter' || key === ' ' && !filter) && currentOpen) {\n      e.preventDefault();\n      if (list.hasFocused()) handleSelect(list.getFocused(), e);\n    } else if (key === 'ArrowDown') {\n      e.preventDefault();\n\n      if (!currentOpen) {\n        toggle.open();\n        return;\n      }\n\n      list.focus(list.next());\n    } else if (key === 'ArrowUp') {\n      e.preventDefault();\n      if (altKey) return closeWithFocus();\n      list.focus(list.prev());\n    }\n  };\n\n  const handleKeyPress = e => {\n    if (readOnly || isDisabled) return;\n    (0, _WidgetHelpers.notify)(onKeyPress, [e]);\n    if (e.defaultPrevented || filter) return;\n    nextSearchChar(String.fromCharCode(e.which), word => {\n      if (!currentOpen) return;\n\n      let isValid = item => _Filter.presets.startsWith(accessors.text(item).toLowerCase(), word.toLowerCase());\n\n      const [items, focusedItem] = list.get();\n      const len = items.length;\n      const startIdx = items.indexOf(focusedItem) + 1;\n      const offset = startIdx >= len ? 0 : startIdx;\n      let idx = 0;\n      let pointer = offset;\n\n      while (idx < len) {\n        pointer = (idx + offset) % len;\n        let item = items[pointer];\n        if (isValid(list.toDataItem(item))) break;\n        idx++;\n      }\n\n      if (idx === len) return;\n      list.focus(items[pointer]);\n    });\n  };\n\n  const handleInputChange = e => {\n    // hitting space to open\n    if (!currentOpen && !e.target.value.trim()) {\n      e.preventDefault();\n    } else {\n      search(e.target.value, e, 'input');\n    }\n\n    toggle.open();\n  };\n\n  const handleAutofillChange = e => {\n    let filledValue = e.target.value.toLowerCase();\n    if (filledValue === '') return void change(null);\n\n    for (const item of rawData) {\n      if (String(accessors.value(item)).toLowerCase() === filledValue || accessors.text(item).toLowerCase() === filledValue) {\n        change(item, e);\n        break;\n      }\n    }\n  };\n\n  function change(nextValue, originalEvent, selected = false) {\n    if (!accessors.matches(nextValue, currentValue)) {\n      (0, _WidgetHelpers.notify)(handleChange, [nextValue, {\n        originalEvent,\n        source: selected ? 'listbox' : 'input',\n        lastValue: currentValue,\n        searchTerm: currentSearch\n      }]);\n      clearSearch(originalEvent);\n      toggle.close();\n    }\n  }\n\n  function focus() {\n    if (filter) filterRef.current.focus();else ref.current.focus();\n  }\n\n  function clearSearch(originalEvent) {\n    search('', originalEvent, 'clear');\n  }\n\n  function search(nextSearchTerm, originalEvent, action = 'input') {\n    if (currentSearch !== nextSearchTerm) handleSearch(nextSearchTerm, {\n      action,\n      originalEvent,\n      lastSearchTerm: currentSearch\n    });\n  }\n  /**\n   * Render\n   */\n\n\n  (0, _react.useImperativeHandle)(outerRef, () => ({\n    focus\n  }));\n  let valueItem = accessors.findOrSelf(data, currentValue);\n  let shouldRenderPopup = (0, _WidgetHelpers.useFirstFocusedRender)(focused, currentOpen);\n  const widgetProps = Object.assign({}, elementProps, {\n    role: 'combobox',\n    id: inputId,\n    //tab index when there is no filter input to take focus\n    tabIndex: filter ? -1 : tabIndex || 0,\n    // FIXME: only when item exists\n    'aria-owns': elementProps['aria-owns'] ? `${listId} ${elementProps['aria-owns']}` : listId,\n    'aria-controls': elementProps['aria-controls'] ? `${listId} ${elementProps['aria-controls']}` : listId,\n    'aria-expanded': !!currentOpen,\n    'aria-haspopup': 'listbox',\n    'aria-busy': !!busy,\n    'aria-live': currentOpen ? 'polite' : undefined,\n    'aria-autocomplete': 'list',\n    'aria-disabled': isDisabled,\n    'aria-readonly': isReadOnly\n  });\n  return /*#__PURE__*/_react.default.createElement(_FocusListContext.FocusListContext.Provider, {\n    value: list.context\n  }, /*#__PURE__*/_react.default.createElement(_Widget.default, _extends({}, widgetProps, {\n    open: !!currentOpen,\n    dropUp: !!dropUp,\n    focused: !!focused,\n    disabled: isDisabled,\n    readOnly: isReadOnly,\n    autofilling: autofilling\n  }, focusEvents, {\n    onKeyDown: handleKeyDown,\n    onKeyPress: handleKeyPress,\n    className: (0, _classnames.default)(className, 'rw-dropdown-list'),\n    ref: ref\n  }), /*#__PURE__*/_react.default.createElement(_WidgetPicker.default, {\n    onClick: handleClick,\n    tabIndex: filter ? -1 : 0,\n    className: (0, _classnames.default)(containerClassName, 'rw-widget-input')\n  }, /*#__PURE__*/_react.default.createElement(_DropdownListInput.default, _extends({}, inputProps, {\n    value: valueItem,\n    dataKeyAccessor: accessors.value,\n    textAccessor: accessors.text,\n    name: name,\n    readOnly: readOnly,\n    disabled: isDisabled,\n    allowSearch: !!filter,\n    searchTerm: currentSearch,\n    ref: filterRef,\n    autoComplete: autoComplete,\n    onSearch: handleInputChange,\n    onAutofill: setAutofilling,\n    onAutofillChange: handleAutofillChange,\n    placeholder: placeholder,\n    renderValue: renderValue\n  })), /*#__PURE__*/_react.default.createElement(_PickerCaret.default, {\n    visible: true,\n    busy: busy,\n    icon: selectIcon,\n    spinner: busySpinner\n  })), shouldRenderPopup && /*#__PURE__*/_react.default.createElement(Popup, _extends({}, popupProps, {\n    dropUp: dropUp,\n    open: currentOpen,\n    transition: popupTransition,\n    onEntered: focus,\n    onEntering: () => listRef.current.scrollIntoView()\n  }), /*#__PURE__*/_react.default.createElement(ListComponent, _extends({}, listProps, {\n    id: listId,\n    data: data,\n    tabIndex: -1,\n    disabled: disabled,\n    groupBy: groupBy,\n    searchTerm: currentSearch,\n    accessors: accessors,\n    renderItem: renderListItem,\n    renderGroup: renderListGroup,\n    optionComponent: optionComponent,\n    value: selectedItem,\n    onChange: (d, meta) => handleSelect(d, meta.originalEvent),\n    \"aria-live\": currentOpen ? 'polite' : undefined,\n    \"aria-labelledby\": inputId,\n    \"aria-hidden\": !currentOpen,\n    ref: listRef,\n    messages: {\n      emptyList: rawData.length ? localizer.messages.emptyFilter : localizer.messages.emptyList\n    }\n  })), showCreateOption && /*#__PURE__*/_react.default.createElement(_AddToListOption.default, {\n    onSelect: handleCreate\n  }, localizer.messages.createOption(currentValue, currentSearch || '')))));\n});\n\nDropdownListImpl.displayName = 'DropdownList';\nDropdownListImpl.propTypes = propTypes;\nvar _default = DropdownListImpl;\nexports.default = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}